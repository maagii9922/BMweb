<main>
  <style>
    .form-label{
      width: 200px;
    }
    .form-control{
      width: 425px;
    }
  </style>
    <div class="container-fluid px-4">
        <h5 class="mt-4">Бараа шинээр бүртгүүлэх</h5>
        <ol class="breadcrumb mb-4">
        </ol>
       
        <div class="card mb-4">
            
            <div class="card-body">
                <div class="dataTable-top">
                    <div class="dataTable-dropdown">
                      {% if errmsg %}
                      <div id ="errmsg" class="alert alert-danger" role="alert">
                      {{errmsg}}
                      </div>
                      {% endif %} 
                        <form method='POST' id="reg_prod_form" >
                            {% csrf_token %}
                            <div class="mb-3">
                                <label for="prodName" class="form-label">Бүтээгдэхүүний нэр</label>
                                <input type="text" class="form-control" id="prodName" name="prodName" placeholder="Бүтээгдэхүүний нэр" required  value="{{data.prodName}}"}/>
                              </div>
                              <div class="mb-3">
                                <label for="prodName_en" class="form-label">Бүтээгдэхүүний нэр англи</label>
                                <input type="text" class="form-control" id="prodName_en" name="prodName_en" placeholder="Бүтээгдэхүүний нэр англи" required  value="{{data.prodName_en}}"/>
                              </div>
                              <div class="mb-3">
                                <label for="brand_id" class="form-label">Брэнд нэр {{data.brand}}:{{data.brand_id}}: </label>
                                <select name="brand_id" id="brand_id" style="width: 220px;" class="btn btn-secondary btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                    <option>-------------</option>
                                    {% for b in brand %}
                                    <option value={{b.id}} {% if data.brand_id|add:"0" == b.id|add:"0" %} selected {% endif %}>{{b.brandName}}</option>
                                    {% endfor %} 
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="prodType_id" class="form-label">төрөл</label>
                                <select name="prodType_id" id="prodType_id" style="width: 220px;" class="btn btn-secondary btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                    <option>-------------</option>
                                    {% for t in type %}
                                    <option value="{{t.id}}" {% if data.prodType_id|add:"0" == t.id|add:"0"  %} selected {% endif %}>{{t.typeName}}</option>
                                    {% endfor %} 
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="emHelber_id" class="form-label">эм хэлбэр</label>
                                <select name="emHelber_id" id="emHelber_id" style="width: 220px;" class="btn btn-secondary btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                    <option>-------------</option>
                                    {% for eh in emHelber %}
                                    <option value="{{eh.id}}" {% if data.emHelber_id|add:"0" == eh.id|add:"0"  %} selected {% endif %}>{{eh.emHelberName}}</option>
                                    {% endfor %} 
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="category_id" class="form-label">эм ангилал</label>
                                <select name="category_id" id="category_id" style="width: 220px;" class="form-select form-select-sm" aria-label=".form-select-sm example">
                                    <option>-------------</option>
                                    {% for c in cat %}
                                    <option value="{{c.id}}" {% if data.category_id|add:"0" == c.id|add:"0"  %} selected {% endif %}>{{c.catName}}</option>
                                    {% endfor %} 
                                </select>
                              </div>















                              <!-- <div class="mb-3">
                                <style>
                                    ul, #myUL {
                                      list-style-type: none;
                                    }
                                    
                                    #myUL {
                                      margin: 0;
                                      padding: 0;
                                    }
                                    
                                    .caret {
                                      cursor: pointer;
                                      -webkit-user-select: none; /* Safari 3.1+ */
                                      -moz-user-select: none; /* Firefox 2+ */
                                      -ms-user-select: none; /* IE 10+ */
                                      user-select: none;
                                    }
                                    
                                    .caret::before {
                                      content: "\25B6";
                                      color: black;
                                      display: inline-block;
                                      margin-right: 6px;
                                    }
                                    
                                    .caret-down::before {
                                      -ms-transform: rotate(90deg); /* IE 9 */
                                      -webkit-transform: rotate(90deg); /* Safari */'
                                      transform: rotate(90deg);  
                                    }
                                    
                                    .nested {
                                      display: none;
                                    }
                                    
                                    .active {
                                      display: block;
                                    }
                                    </style>
                                <ul id="myUL">
                                    {% for c in cat %}
                                    {% if c.parent == None %}
                                    <li value="{{c.id}}"><span class="caret">{{c.catName}} {{c.parent}}</span>
                                      <ul class="nested">
                                        {% for c1 in cat %}
                                        {% if c1.parent == c.id %}
                                        <li value="{{c1.id}}"><span class="caret">{{c1.catName}} {{c1.parent}}</span>
                                            <ul class="nested">
                                                {% for c2 in cat %}
                                                {% if c2.parent == c1.id %}
                                                <li value="{{c2.id}}"><span class="caret">{{c2.catName}} {{c2.parent}}</span>
                                                    <ul class="nested">
                                                        {% for c3 in cat %}
                                                        {% if c3.parent == c2.id %}
                                                        <li value="{{c3.id}}"><span class="caret">{{c3.catName}} {{c3.parent}}</span>
                                                            <ul class="nested">
                                                                {% for c4 in cat %}
                                                                {% if c4.parent == c3.id %}
                                                                <li value="{{c4.id}}"><span class="caret">{{c4.catName}} {{c4.parent}}</span>
                                                                    <ul class="nested">
                                                                        {% for c5 in cat %}
                                                                        {% if c5.parent == c4.id %}
                                                                        <li value="{{c3.id}}"><span class="caret">{{c5.catName}} {{c5.parent}}</span>
                                                                         
                                                                        </li>  
                                                                        {% endif %}
                                                                        {% endfor %}
                                                                      </ul>
                                                                </li>  
                                                                {% endif %}
                                                                {% endfor %}
                                                              </ul>
                                                        </li>  
                                                        {% endif %}
                                                        {% endfor %}
                                                      </ul>
                                                </li>  
                                                {% endif %}
                                                {% endfor %}
                                              </ul>
                                        </li>  
                                        {% endif %}
                                        {% endfor %}
                                      </ul>
                                    </li>
                                    {% endif %}
                                    {% endfor %}
                                  </ul>
                              </div> -->











                              <div class="mb-3">
                                <label for="borBoloh" class="form-label">ПОС-р борлуулж болох эсэх {{data.borBoloh_id}}</label>
                                <input type="checkbox" id="borBoloh" name="borBoloh" {% if data.borBoloh %} checked {% endif %} onclick='borBolohClick(this);'/>
                              </div>  
                              <div class="mb-3" >                           
                                <label for="company_id" class="form-label" >Ашиглах компани</label> 
                                <div class="row g-3">
                                  <div class="col-auto">
                                        <select name="company_id" id="company_id" style="width: 250px;"  class="form-select" size="3" aria-label="size 3 select example">
                                            
                                            {% if selected_company  %}
                                              {% for co in comp %}
                                                    {% if co.id|stringformat:"i" not in selected_company %}
                                                      <option value="{{co.id}}">{{co.comName}}</option>
                                                    {% endif %}  
                                              {% endfor %} 
                                            {% else %}
                                                {% for co in comp %}
                                                <option value="{{co.id}}" >{{co.comName}}</option>
                                                {% endfor %} 
                                            {% endif %}
                                            
                                        </select> </div> 
                                        <div class="col-auto d-grid gap-2">       
                                        <input type="button" value='>>' class="btn btn-sm btn-secondary" onclick="company_select()" /> 
                                        <input type="button" value='<<' class="btn btn-sm btn-secondary" onclick="company_deselect()"/> </div>
                                        <div class="col-auto">
                                        <select name="selected_company" id="selected_company" style="width: 250px;"  class="form-select" size="3" aria-label="size 3 select example" multiple>  
                                            {% for co in comp %}
                                              {% for sc in selected_company %}
                                                {% if co.id|add:"0" == sc|add:"0" %}
                                                <option value="{{co.id}}">{{co.comName}}</option>
                                                {% endif %}
                                              {% endfor %} 
                                            {% endfor %}                                  
                                          </select></div>
                                          <script>
                                          function company_select(){//console.log('company_select')
                                              s = document.getElementById('company_id')                                      
                                              text = s.options[s.selectedIndex].text
                                              value = s.value
                                              s.remove(s.selectedIndex); 

                                              s1 = document.getElementById('selected_company') 
                                              s1.options[s1.options.length] = new Option(text, value);

                                          }    
                                          function company_deselect(){//console.log('company_select')
                                              s = document.getElementById('selected_company')                                      
                                              text = s.options[s.selectedIndex].text
                                              value = s.value
                                              s.remove(s.selectedIndex); 
        
                                              s1 = document.getElementById('company_id') 
                                              s1.options[s1.options.length] = new Option(text, value);
        
                                          }
                                          </script>
                                       
                                </div>
                              </div>
                              <div class="mb-3">
                                <label for="hemNegj_id" class="form-label">Хэмжих нэгж</label>
                                <select name="hemNegj_id" id="hemNegj_id"  style="width: 220px;" class="btn btn-secondary btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                    <option>-------------</option>
                                    {% for hj in hemNegj %}
                                    <option value="{{hj.id}}" {% if data.hemNegj_id|add:"0"  == hj.id|add:"0"  %} selected {% endif %}>{{hj.hemNegjName  }}</option>
                                    {% endfor %} 
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="hudNegj" class="form-label">Худалдах нэгж</label>
                                <input type="number" class="form-control" id="hudNegj" name="hudNegj" placeholder="Худалдах нэгж" value="{{data.hudNegj}}"/>
                              </div>
                              <div class="mb-3">
                                <label for="erNershil" class="form-label">Ерөнхий нэршил</label>
                                <input type="text" class="form-control" id="erNershil" name="erNershil" placeholder="Ерөнхий нэршил" value="{{data.erNershil}}"/>
                              </div>
                              <div class="mb-3">
                                <label for="zCode" class="form-label">Зураасан код</label>
                                <input type="number" class="form-control" id="zCode" name="zCode" placeholder="Зураасан код" required  value="{{data.zCode}}"/>
                              </div>
                              <div class="mb-3">
                                <label for="paiz_id" class="form-label">Пайз</label>
                                <select name="paiz_id" id="paiz_id"  style="width: 220px;" class="btn btn-secondary btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                    <option>-------------</option>
                                    {% for p in paiz %}
                                    <option value="{{p.id}}" {% if data.paiz_id|add:"0" == p.id|add:"0" %} selected {% endif %}>{{p.paizName}}</option>
                                    {% endfor %} 
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="uildwerlegch_id" class="form-label">Үйлдвэрлэгч</label>
                                <select name="uildwerlegch_id" id="uildwerlegch_id"  style="width: 220px;" class="btn btn-secondary btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                    <option>-------------</option>
                                    {% for ui in uildwerlegch %}
                                    <option value="{{ui.id}}" {% if data.uildwerlegch_id|add:"0" == ui.id|add:"0"  %} selected {% endif %}>{{ui.manName}}</option>
                                    {% endfor %} 
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="uNiiluulegch_id" class="form-label">Үндсэн нийлүүлэгч</label>
                                <select name="uNiiluulegch_id" id="uNiiluulegch_id" style="width: 220px;" class="btn btn-secondary btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                    <option>-------------</option>
                                    {% for ui in uNiiluulegch %}
                                    <option value="{{ui.id}}" {% if data.uNiiluulegch_id|add:"0" == ui.id|add:"0"  %} selected {% endif %}>{{ui.niiName}}</option>
                                    {% endfor %} 
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="price" class="form-label">Үнэ</label>
                                <input type="number" class="form-control" id="price" name="price" placeholder="Үнэ"  value="{{data.price}}"/>
                              </div>
                            {% if edit %} <input type='hidden' name='edit' value='{{edit}}'/> {% endif %}
                            <input id="had" type='submit' class="btn btn-primary"  value='Хадгалах' onclick="selectAll();" />
                            <!-- <button type="button" class="btn btn-primary" id="had" >Хадгалах</button> -->

                            <script>
                                var toggler = document.getElementsByClassName("caret");
                                var i;

                                for (i = 0; i < toggler.length; i++) {
                                toggler[i].addEventListener("click", function() {
                                    this.parentElement.querySelector(".nested").classList.toggle("active");
                                    this.classList.toggle("caret-down");
                                });
                                }
                                function checkValid(){                                
                                    // const form = document.getElementById('reg_prod_form');
                                    // form.addEventListener("change", () => {
                                    //     document.getElementById('had').disabled = !form.checkValidity()
                                    // });
                                }
                                function borBolohClick(cb) {
                                  console.log("Clicked, new value = " + cb.checked);
                                }

                                function selectAll() 
                                  { 
                                      selectBox = document.getElementById("selected_company"); console.log(selectBox)

                                      for (var i = 0; i < selectBox.options.length; i++) 
                                      { console.log(selectBox.options[i])
                                          selectBox.options[i].selected = true; 
                                      } 
                                  }
                            </script>
                        </form>
                </div>
                <div>
                        
                </div>
                
            </div>
           
        </div>
    </div>
</main>